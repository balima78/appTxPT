{
    "collab_server" : "",
    "contents" : "\nlibrary(shiny)\nlibrary(shinythemes)\nlibrary(plotly)\nlibrary(shinydashboard)\n\n# https://fontawesome.com/v4.7.0/icons/\n\n#install.packages(\"shinythemes\")\n\ndados<-read.csv2(\"NewsTx.csv\") \n\nshinyUI(\n\n  fluidPage(\n    # nome no browser\n  headerPanel(title =\"\",\n          windowTitle = \"RAT | Oficina de BioEstatistica\"), \n    \n  # Título da página com imagem OB\n  titlePanel(a(href=\"http://bioestatisticas.wixsite.com/bioestatisticas\", \n               img(src='ob.jpg', align = \"right\",height=60,width=150))),\n  a(href=\"http://bioestatisticas.wixsite.com/bioestatisticas/rat\", \n    h1(\"Registo Aberto de Transplantes (RAT)\")),\n#  br(\"\"),\n  hr(),\n\n  tagList(\n#  shinythemes::themeSelector(),\n    navbarPage(theme = shinytheme(\"cerulean\"),\n               \"RAT\",\n               tabPanel(\"Tx Renal\", icon = icon(\"heartbeat\"),\n                      h2(\"Transplante Renal\"),\n                      sidebarPanel(\n                        conditionalPanel(\n                          'input.rim === \"Gráficos\"',\n                        wellPanel(\n                          # Escolher o intervalo de anos\n                          sliderInput(\"ano\", \"Seleccione intervalo:\",\n                                      min = 2003, max = 2016, step = 1, sep = \"\",\n                                      value = c(2003,2016)),\n                          radioButtons('tipo', 'Seleccione tipo de gráfico:', \n                                       c('linhas', 'barras'),\n                                       inline = TRUE)),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        wellPanel(\n                          # escolher indicadores\n                          h4(\"Selecione indicadores\"),\n                          selectInput('y1', 'Indicador 1:', names(dados)[-1],\n                                      c(\"DCpmh\",\"TxDCpmh\",\"TxDVpmh\",\"Tx_total_pmh\")[2]),\n                          selectInput('y2', 'Indicador 2:', names(dados)[-1],\n                                      c(\"DCpmh\",\"TxDCpmh\",\"TxDVpmh\",\"Tx_total_pmh\")[3])),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        br(),\n                        wellPanel(\n                          # escolher ano ou fazer play\n                          h4(\"Escolha o ano ou faça 'play':\"),\n                          sliderInput(\"num\", \"\",\n                                      min = 2003, max = 2016,\n                                      value = 2009, step = 1, sep = \"\",\n                                      animate = animationOptions(interval = 1600, loop = TRUE))\n                          )),\n                        conditionalPanel(\n                          'input.rim === \"Tabela\"',\n                          wellPanel(\n                            # Escolher o intervalo de anos\n                            sliderInput(\"anos\", \"Seleccione intervalo:\",\n                                        min = 2003, max = 2016, step = 1, sep = \"\",\n                                        value = c(2003,2016))\n                          )),\n                        conditionalPanel(\n                          'input.rim === \"Legenda\"',\n                          helpText(\"Descrição das variáveis usadas nas análises gráficas e disponibilizadas na tabela para download.\")\n                        )\n                        ),\n                      # Painel principal de Tx Renal\n                      mainPanel(\n                        tabsetPanel(type = \"tabs\",\n                                    id = 'rim',\n                                    tabPanel(\"Gráficos\", icon = icon(\"area-chart\"),\n                                             h4(\"Distribuição anual dos indicadores\"),\n                                             plotOutput(\"evolPlot\"), \n                                             br(),\n                                             br(),\n                                             h4(\"Correlação entre os indicadores\"),\n                                             plotOutput(\"corrPlot\"),\n                                             br(),\n                                             br(),\n                                             h4(\"Evolução anual do 'indicador 1' segundo o número de dadores cadáver\"),\n                                             plotlyOutput(\"movPlot\")\n                                             ),\n                                    tabPanel(\"Tabela\", icon = icon(\"table\"),\n                                             DT::dataTableOutput(\"tabela\"), downloadButton(\"downloadData\", \"Download\")),\n                                    tabPanel(\"Legenda\", icon = icon(\"th-list\"),\n                                             tableOutput(\"legenda\"))\n                                    )\n                        ),\n                      br(),\n                      hr(),\n                      print(\"Those informations are based on the Global Observatory on Donation and Transplantation (GODT) data, produced by the WHO-ONT collaboration.\n                            \")\n                      \n                      ),\n             navbarMenu(\"cPRA\",\n                     tabPanel(\"calculador\", icon = icon(\"calculator\"),\n                              # título da sub-página\n                              fluidRow(\n                                h2(\"Valor calculado de Pesquisa de Reactividade Alogénica (cPRA)\"),\n                                h4(\"Seleccione os antigéneos HLA para os quais o candidato está sensibilizado:\")),\n                              # selecção de antigéneos\n                              fluidRow(\n                                checkboxGroupInput(\"hlaA\", \"HLA-A*\",\n                                                          c(\"A*01\" = \"A1\",\"A*02\" = \"A2\",\"A*03\" = \"A3\",\"A*11\" = \"A11\",\"A*23\" = \"A23\",\"A*24\" = \"A24\",\"A*25\" = \"A25\",\"A*26\" = \"A26\",\"A*29\" = \"A29\",\"A*30\" = \"A30\",\"A*31\" = \"A31\",\"A*32\" = \"A32\",\"A*33\" = \"A33\",\"A*34\" = \"A34\",\"A*36\" = \"A36\",\"A*66\" = \"A66\",\"A*68\" = \"A68\",\"A*69\" = \"A69\",\"A*74\" = \"A74\",\"A*80\" = \"A80\"),\n                                                          inline = TRUE\n                                                   ),\n                              #  column(2,\n                              #         checkboxGroupInput(\"hlaC\", \"HLA-C*\",\n                              #                            c(\"C01\",\"C02\",\"C03\"))\n                              #  ),\n                                # column(2,\n                                  checkboxGroupInput(\"hlaB\", \"HLA-B*\",\n                                                          c('B*07'='B7','B*08'='B8','B*13'='B13','B*14'='B14','B*15'='B15','B*18'='B18','B*27'='B27','B*35'='B35','B*37'='B37','B*38'='B38','B*39'='B39','B*40'='B40','B*41'='B41','B*42'='B42','B*44'='B44','B*45'='B45','B*46'='B46','B*47'='B47','B*48'='B48','B*49'='B49','B*50'='B50','B*51'='B51','B*52'='B52','B*53'='B53','B*54'='B54','B*55'='B55','B*56'='B56','B*57'='B57','B*58'='B58','B*67'='B67','B*73'='B73','B*78'='B78','B*81'='B81','B*82'='B82'),\n                                                          inline = TRUE\n                                                     ),\n                                  checkboxGroupInput(\"hlaDR\", \"HLA-DRB1*\",\n                                                          c('DRB1*01'='DR1','DRB1*03'='DR3','DRB1*04'='DR4','DRB1*07'='DR7','DRB1*08'='DR8','DRB1*09'='DR9','DRB1*10'='DR10','DRB1*11'='DR11','DRB1*12'='DR12','DRB1*13'='DR13','DRB1*14'='DR14','DRB1*15'='DR15','DRB1*16'='DR16'),\n                                                          inline = TRUE\n                                                     )\n                                    ),\n                              # butões de acção limpa/calcula\n                              fluidRow(\n                              actionButton(\"limpa\", \"Limpar\"),\n                              br(),\n                              h4(\"Anticorpos anti-HLA seleccionados:\"),\n        \n                              textOutput(\"A\"),\n                              textOutput(\"C\"),\n                              textOutput(\"B\"),\n                              textOutput(\"DR\"),\n                              \n                              br(),\n                              \n                              actionButton(\"calcula\", \"Calcular\"), \n                              \n                              # tableOutput(\"sensib\"),\n                              \n                              h4(\"valor percentual de cPRA :\"),\n                              strong(textOutput(\"cpra\")),\n                              h5(\"(ver 'Nota técnica')\")\n                              ),\n                              # disclaimer\n                              fluidRow(\n                              br(),\n                              h5(\"O valor gerado pelo calculador cPRA, neste web-site, é apenas para uso informativo.\"),\n                              h5(em(\"The value produced by the cPRA calculator on this web-site is for your informational use only.\"))\n                              \n                              )),\n                     tabPanel(\"Nota técnica\", icon = icon(\"sticky-note\"),\n                              p(\"O valor calculado de Pesquisa de Reactividade Alogénica (cPRA) é uma estimativa da probabilidade de CrossMatch virtual positivo tendo em conta as tipagens HLA de um determinado grupo de potenciais dadores [1,2].\"),\n                              p(\"Tendo por base os antigéneos HLA para os quais um candidato a transplante esteja sensibilizado, o cPRA mede a dificuldade de encontrar um possível dador para este candidato.\"),\n                              p(\"Para o estimador cPRA aqui apresentado foram utilizadas as frequencias HLA (alélicas e haplóticas), de 37.993 dadores voluntários de medula óssea, previamente publicadas [3].\"),\n                              p(\"O cálculo do valor de cPRA foi feito tal como descrito por Kransdorf e colegas em 2017 [4]\"),\n                              h6(p(\"[1] - Bruno A Lima, Helena Alves. Seleção do Par Dador-Recetor em Transplante Renal:Resultados Comparativos de uma Simulação. Acta Med Port 30(12), 2017: 854-860\"),\n                                 p(\"[2] - Bruno A. Lima, Miguel Mendes, Helena Alves. Hypersensitized candidates to kidney transplantation in Portugal. Port J Nephrol Hypert. 27(2), 2013: 77-81\"),\n                                 p(\"[3] - Bruno A. Lima, Helena Alves. HLA-A, -C, -B, and -DRB1 allelic and haplotypic diversity in bone marrow volunteer donors from Northern Portugal. Organs, Tissues & Cells. Volume 16(1), 2013, March: 19-26\"),\n                                 p(\"[4] - Kransdorf E, Pando M, Gragert L, Kaplan B. HLA Population Genetics in Solid Organ Transplantation. Transplantation 101(9), 2017: 1971-1976\"))\n                              )\n        \n                     ),\n             \n             tabPanel(\"Mais\", icon = icon(\"globe\"),\n                      h4(\"Interessa também comparar as actividades de transplantação em Portugal com as dos restantes países da União Europeia.\"),\n                      a(href=\"https://bioestatisticas.shinyapps.io/appue28/\", target=\"_blank\",\n                        img(src='link2.jpg', align = \"left\",height=60,width=150)))\n             )\n             \n  ),\n\nhr(),\nfluidRow(\n  column(8, icon(\"copyright\"), \n         a(\"2018, 'Oficina de BioEstatística' - All Rights Reserved |\"),\n         icon(\"envelope-o\"), a(href=\"http://bioestatisticas.wixsite.com/bioestatisticas/contact\",\"bioestatisticas@gmail.com\")\n         )),\nhr()\n\n))\n\n",
    "created" : 1523474123188.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3391596633",
    "id" : "69C91256",
    "lastKnownWriteTime" : 1523475615,
    "last_content_update" : 1523475615718,
    "path" : "D:/CHN/OpenData/appTxPT/ui.R",
    "project_path" : "ui.R",
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}